<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Hub de Personagem para Fate/Great War - Sistema de gerenciamento de RPG imersivo com tema Matrix. Acesse com código seguro.">
    <meta name="keywords" content="Fate, RPG, Great War, Hub, Personagem, Matrix">
    <meta name="author" content="Seu Nome ou Equipe">
    <meta name="robots" content="noindex, nofollow"> <!-- Evita indexação pública para segurança -->
    <title>Fate/Great War - Hub de Personagem</title>
    
    <!-- Preload para performance: Carrega fonts e CSS críticos primeiro -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <link rel="preload" href="css/style.css" as="style">
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Favicon para melhor UX -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚔️</text></svg>">
    
    <style>
        /* Estilos mínimos inline (mova para style.css para produção) */
        .loading { opacity: 0.5; pointer-events: none; transition: opacity 0.3s ease; }
        .error { color: #ff4444; font-size: 14px; margin-top: 10px; animation: fadeIn 0.5s; }
        .success { color: #44ff44; font-size: 14px; margin-top: 10px; animation: fadeIn 0.5s; }
        .hidden { display: none; }
        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
        
        /* Responsividade expandida */
        @media (max-width: 768px) {
            .profile-grid { grid-template-columns: 1fr; gap: 15px; }
            .tabs { flex-direction: column; gap: 10px; }
            .container { padding: 10px; font-size: 14px; }
            .status-card { flex: 1 1 100%; margin-bottom: 10px; }
            .servant-stats { flex-direction: column; }
        }
        @media (max-width: 480px) {
            .login-title { font-size: 1.5em; }
            .btn { padding: 10px; font-size: 14px; }
            .form-input { font-size: 14px; }
        }
        
        /* Animações suaves para UX */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .tab.active { border-bottom: 2px solid var(--accent); transition: border 0.3s; }
        .content-panel { transition: opacity 0.3s ease; }
    </style>
</head>
<body>
    <!-- Skip Link para acessibilidade (pula para conteúdo principal) -->
    <a href="#main-content" class="sr-only" id="skip-link">Pular para conteúdo principal</a>
    
    <!-- Matrix Rain Background (mantido, mas com aria-hidden para acessibilidade) -->
    <div class="matrix-rain" id="matrixRain" aria-hidden="true"></div>
    
    <!-- Main Container -->
    <div class="container">
        <!-- Login Screen -->
        <main id="login-screen" role="main" aria-labelledby="login-title">
            <h2 id="login-title" class="login-title">FATE/GREAT WAR</h2>
            <p class="login-subtitle">ACESSO AO HUB DE PERSONAGEM</p>
            <form id="login-form" novalidate aria-describedby="login-feedback">
                <label for="code-input" class="sr-only">Código de acesso</label> <!-- Label oculto para leitores de tela -->
                <input type="text" 
                       class="code-input" 
                       id="code-input" 
                       placeholder="DIGITE O CÓDIGO (ex: FG-XXXXX)"
                       title="Digite seu código de acesso único"
                       aria-label="Código de acesso do jogador"
                       required
                       pattern="FG-[A-Z0-9]{5,}"
                       maxlength="20"
                       autocomplete="off"> <!-- Evita sugestões de preenchimento automático para segurança -->
                <button type="submit" class="login-btn" id="login-btn" aria-describedby="login-feedback">AUTENTICAR</button>
            </form>
            <p class="subtitle" style="margin-top: 20px;">Use o código do seu convite do terminal</p>
            <div id="login-feedback" class="error hidden" aria-live="assertive" role="alert"></div>
        </main>
        
        <!-- Dashboard -->
        <main id="dashboard" class="hidden" role="main" aria-labelledby="dashboard-title">
            <header>
                <div>
                    <h1 id="dashboard-title">FATE/GREAT WAR - HUB DE PERSONAGEM</h1>
                    <p class="subtitle" id="user-greeting">Bem-vindo, Candidato</p>
                </div>
                <div class="subtitle" id="user-code">CÓDIGO: --------</div>
            </header>
            
            <!-- Navigation Tabs (Melhorado com ARIA para navegação por teclado) -->
            <nav class="tabs" role="tablist" aria-label="Navegação do hub">
                <button class="tab active" data-tab="profile" role="tab" aria-selected="true" aria-controls="profile-panel" tabindex="0">PERFIL DO JOGADOR</button>
                <button class="tab" data-tab="servant" role="tab" aria-selected="false" aria-controls="servant-panel" tabindex="0">STATUS DO SERVO</button>
                <button class="tab" data-tab="war" role="tab" aria-selected="false" aria-controls="war-panel" tabindex="0">INTELIGÊNCIA DA GUERRA</button>
                <button class="tab" data-tab="quests" role="tab" aria-selected="false" aria-controls="quests-panel" tabindex="0">MISSÕES</button>
                <button class="tab" data-tab="messages" role="tab" aria-selected="false" aria-controls="messages-panel" tabindex="0">COMUNICAÇÕES DO MESTRE</button>
            </nav>
            
            <!-- Content Panels (Adicionado IDs únicos e ARIA para painéis) -->
            <section class="content-panel active" id="profile-panel" role="tabpanel" aria-labelledby="profile-tab" aria-hidden="false">
                <div class="profile-section">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <h3 class="section-title">DADOS PESSOAIS</h3>
                        <button class="btn" id="edit-profile-btn" aria-label="Editar perfil do jogador" aria-expanded="false">EDITAR PERFIL</button>
                    </div>
                    <div class="profile-grid">
                        <!-- Campos de perfil (adicionados data-attributes para JS e validação) -->
                        <div class="profile-item">
                            <label class="profile-label" for="edit-profile-name">NOME</label>
                            <div class="profile-value" id="profile-name" data-field="name">---</div>
                            <input type="text" class="edit-input hidden" id="edit-profile-name" placeholder="Digite seu nome" aria-label="Editar nome do jogador" maxlength="50">
                        </div>
                        <!-- Repetir para outros campos (origin, type, nature, motivation) com IDs únicos -->
                        <div class="profile-item">
                            <label class="profile-label" for="edit-profile-origin">ORIGEM</label>
                            <div class="profile-value" id="profile-origin" data-field="origin">---</div>
                            <input type="text" class="edit-input hidden" id="edit-profile-origin" placeholder="Digite sua origem" aria-label="Editar origem do jogador" maxlength="100">
                        </div>
                        <div class="profile-item">
                            <label class="profile-label" for="edit-profile-type">PERFIL</label>
                            <div class="profile-value" id="profile-type" data-field="profile">---</div>
                            <input type="text" class="edit-input hidden" id="edit-profile-type" placeholder="Digite seu perfil" aria-label="Editar perfil do jogador" maxlength="100">
                        </div>
                        <div class="profile-item">
                            <label class="profile-label" for="edit-profile-nature">NATUREZA</label>
                            <div class="profile-value" id="profile-nature" data-field="nature">---</div>
                            <input type="text" class="edit-input hidden" id="edit-profile-nature" placeholder="Digite sua natureza" aria-label="Editar natureza do jogador" maxlength="100">
                        </div>
                        <div class="profile-item">
                            <label class="profile-label" for="edit-profile-motivation">MOTIVAÇÃO</label>
                            <div class="profile-value" id="profile-motivation" data-field="motivation">---</div>
                            <input type="text" class="edit-input hidden" id="edit-profile-motivation" placeholder="Digite sua motivação" aria-label="Editar motivação do jogador" maxlength="200">
                        </div>
                        <div class="profile-item">
                            <label class="profile-label">STATUS NA GUERRA</label>
                            <div class="profile-value" id="profile-status">ATIVO</div>
                        </div>
                    </div>
                    <div class="edit-buttons hidden" id="profile-edit-buttons">
                        <button class="btn" id="save-profile-btn" aria-label="Salvar alterações do perfil">SALVAR ALTERAÇÕES</button>
                        <button class="btn" id="cancel-edit-btn" aria-label="Cancelar edição">CANCELAR</button>
                    </div>
                    <div id="profile-feedback" class="hidden" aria-live="polite" role="status"></div> <!-- Feedback para salvamento -->
                </div>
                
                <div class="profile-section">
                    <h3 class="section-title">ATIVIDADE RECENTE</h3>
                    <div class="profile-item">
                        <div class="profile-value" id="recent-activity">Aguardando primeiro briefing de missão...</div>
                    </div>
                </div>
            </section>
            
            <!-- Outros painéis mantidos similares, com melhorias em ARIA e estrutura -->
            <section class="content-panel" id="servant-panel" role="tabpanel" aria-labelledby="servant-tab" aria-hidden="true">
                <!-- Conteúdo do servo (mantido, mas adicionei data-attributes para futuras expansões) -->
                <div class="profile-section">
                    <h3 class="section-title">DADOS DO SERVO</h3>
                    <div class="profile-grid">
                        <div class="profile-item">
                            <label class="profile-label">CLASSE</label>
                            <div class="profile-value" id="servant-class" data-field="class">---</div>
                        </div>
                        <!-- ... (outros campos similares) -->
                    </div>
                </div>
                <!-- Atributos com barras (preparado para interatividade) -->
                <div class="profile-section">
                    <h3 class="section-title">ATRIBUTOS</h3>
                    <div class="servant-stats">
                        <div class="stat-bar" data-stat="health">
                            <div class="stat-label"><span>SAÚDE</span><span id="health-value">100%</span></div>
                            <div class="bar-container"><div class="bar-fill" id="health-bar" style="width: 100%"></div></div>
                        </div>
                        <div class="stat-bar" data-stat="mana">
                            <div class="stat-label"><span>MANA</span><span id="mana-value">100%</span></div>
                            <div class="bar-container"><div class="bar-fill" id="mana-bar" style="width: 100%"></div></div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Painel de Guerra (adicionado placeholder para mapa futuro) -->
            <section class="content-panel" id="war-panel" role="tabpanel" aria-labelledby="war-tab" aria-hidden="true">
                <div class="profile-section">
                    <h3 class="section-title">STATUS DA GUERRA</h3>
                    <div class="war-status">
                        <!-- Cartões de status -->
                    </div>
                </div>
                <div class="profile-section">
                    <h3 class="section-title">EVENTOS RECENTES</h3>
                    <div class="profile-item">
                        <div class="profile-value" id="war-events">Declaração de guerra confirmada. Sete Mestres convocados.</div>
                    </div>
                </div>
                <!-- Placeholder para mapa interativo (futuro) -->
                <div class="profile-section hidden" id="map-placeholder">
                    <h3 class="section-title">MAPA DA GUERRA</h3>
                    <div id="war-map" aria-label="Mapa interativo da guerra" style="height: 300px; background: #000; border: 1px solid var(--accent);">Mapa será carregado aqui.</div>
                </div>
            </section>
            
            <!-- Painel de Missões (melhorado com feedback) -->
            <section class="content-panel" id="quests-panel" role="tabpanel" aria-labelledby="quests-tab" aria-hidden="true">
                <div class="profile-section">
                    <h3 class="section-title">SISTEMA DE MISSÕES</h3>
                    <form class="quest-form" id="quest-form" novalidate aria-describedby="quest-feedback">
                        <h4 style="color: var(--accent); margin-bottom: 15px;">CRIAR NOVA MISSÃO</h4>
                        <div class="form-group">
                            <label class="profile-label" for="quest-title">TÍTULO DA MISSÃO</label>
                            <input type="text" class="form-input" id="quest-title" placeholder="Digite o título da missão" required maxlength="100">
                        </div>
                        <div class="form-group">
                            <label class="profile-label" for="quest-description">DESCRIÇÃO</label>
                            <textarea class="form-input" id="quest-description" placeholder="Descreva os objetivos da missão" rows="3" required maxlength="500"></textarea>
                        </div>
                        <button type="submit" class="btn" id="add-quest-btn">ADICIONAR MISSÃO</button>
                    </form>
                    <div id="quest-feedback" class="error hidden" aria-live="assertive" role="alert"></div>
                    <div class="quest-list" id="quest-list" aria-label="Lista de missões"></div>
                </div>
            </section>
            
            <!-- Painel de Mensagens (preparado para notificações) -->
            <section class="content-panel" id="messages-panel" role="tabpanel" aria-labelledby="messages-tab" aria-hidden="true">
                <div class="profile-section">
                    <h3 class="section-title">COMUNICAÇÕES DO MESTRE</h3>
                    <div id="messages-list" aria-label="Lista de mensagens">
                        <div class="profile-item">
                            <div class="profile-label">MENSAGEM MAIS RECENTE</div>
                            <div class="profile-value" id="latest-message">Bem-vindo à Guerra do Santo Graal. Seu ritual de invocação do Servo está agendado para daqui a 3 dias no Rio Akagane. Prepare-se adequadamente.</div>
                        </div>
                    </div>
                    <!-- Placeholder para notificações futuras -->
                    <div id="notifications" class="hidden" aria-live="polite" role="log">Nenhuma nova notificação.</div>
                </div>
            </section>
